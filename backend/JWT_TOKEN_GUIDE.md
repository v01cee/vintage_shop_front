# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ JWT —Ç–æ–∫–µ–Ω–∞–º

## –ß—Ç–æ —Ç–∞–∫–æ–µ JWT —Ç–æ–∫–µ–Ω?

JWT (JSON Web Token) ‚Äî —ç—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Å–ø–æ—Å–æ–± –ø–µ—Ä–µ–¥–∞—á–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–æ–º –∏ —Å–µ—Ä–≤–µ—Ä–æ–º. –í –Ω–∞—à–µ–º API —Ç–æ–∫–µ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

## –ó–∞—á–µ–º –Ω—É–∂–µ–Ω —Ç–æ–∫–µ–Ω?

–ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —Ç–æ–∫–µ–Ω, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å –∫–∞–∂–¥—ã–º –∑–∞–ø—Ä–æ—Å–æ–º –∫ –∑–∞—â–∏—â–µ–Ω–Ω—ã–º endpoints (—Å –∏–∫–æ–Ω–∫–æ–π üîí –≤ Swagger UI).

## –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω?

### –®–∞–≥ 1: –í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ API

**Endpoint:** `POST /api/v1/users/login`

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "phone_or_email": "test2@example.com",
  "password": "123123"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIyNSIsImV4cCI6MTc2ODI4MDkyOX0...",
  "token_type": "bearer",
  "user": {
    "id": 25,
    "phone_or_email": "test2@example.com",
    "full_name": "max",
    ...
  }
}
```

**–í–∞–∂–Ω–æ:** –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ `access_token` –∏–∑ –æ—Ç–≤–µ—Ç–∞!

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω?

### –í Swagger UI:

1. –ù–∞–π–¥–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"Authorize"** (–æ–±—ã—á–Ω–æ –≤–≤–µ—Ä—Ö—É —Å–ø—Ä–∞–≤–∞, —Å –∏–∫–æ–Ω–∫–æ–π –∑–∞–º–∫–∞ üîí)
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω–µ—ë
3. –í –ø–æ–ª–µ `Value` –≤—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à —Ç–æ–∫–µ–Ω (–±–µ–∑ —Å–ª–æ–≤–∞ "Bearer", –ø—Ä–æ—Å—Ç–æ —Ç–æ–∫–µ–Ω)
4. –ù–∞–∂–º–∏—Ç–µ **"Authorize"**, –∑–∞—Ç–µ–º **"Close"**
5. –¢–µ–ø–µ—Ä—å –≤—Å–µ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ endpoints –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –í –∫–æ–¥–µ (JavaScript/fetch):

```javascript
const token = "–≤–∞—à_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å";

fetch('http://localhost:8000/api/v1/cart', {
  method: 'GET',
  headers: {
    'Authorization': `Bearer ${token}`,
    'Content-Type': 'application/json'
  }
})
```

### –í curl:

```bash
curl -X GET "http://localhost:8000/api/v1/cart" \
  -H "Authorization: Bearer –≤–∞—à_—Ç–æ–∫–µ–Ω_–∑–¥–µ—Å—å"
```

## –ß—Ç–æ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å —Å —Ç–æ–∫–µ–Ω–æ–º?

–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ –≤—ã –º–æ–∂–µ—Ç–µ:

1. **–ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–µ–±–µ:**
   - `GET /api/v1/users/me` - –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

2. **–†–∞–±–æ—Ç–∞—Ç—å —Å –∫–æ—Ä–∑–∏–Ω–æ–π:**
   - `GET /api/v1/cart` - –ø–æ–ª—É—á–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É
   - `POST /api/v1/cart/items` - –¥–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä –≤ –∫–æ—Ä–∑–∏–Ω—É
   - `PUT /api/v1/cart/items/{item_id}` - –æ–±–Ω–æ–≤–∏—Ç—å —Ç–æ–≤–∞—Ä –≤ –∫–æ—Ä–∑–∏–Ω–µ
   - `DELETE /api/v1/cart/items/{item_id}` - —É–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
   - `DELETE /api/v1/cart` - –æ—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É

3. **–†–∞–±–æ—Ç–∞—Ç—å —Å –∑–∞–∫–∞–∑–∞–º–∏:**
   - `GET /api/v1/orders` - –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤
   - `POST /api/v1/orders` - —Å–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑
   - `GET /api/v1/orders/{order_id}` - –ø–æ–ª—É—á–∏—Ç—å –∑–∞–∫–∞–∑
   - `PUT /api/v1/orders/{order_id}` - –æ–±–Ω–æ–≤–∏—Ç—å –∑–∞–∫–∞–∑

4. **–û—Å—Ç–∞–≤–ª—è—Ç—å –æ—Ç–∑—ã–≤—ã:**
   - `POST /api/v1/reviews` - —Å–æ–∑–¥–∞—Ç—å –æ—Ç–∑—ã–≤
   - `PUT /api/v1/reviews/{review_id}` - –æ–±–Ω–æ–≤–∏—Ç—å –æ—Ç–∑—ã–≤
   - `DELETE /api/v1/reviews/{review_id}` - —É–¥–∞–ª–∏—Ç—å –æ—Ç–∑—ã–≤

## –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Ç–æ–∫–µ–Ω–∞

–¢–æ–∫–µ–Ω –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω **30 –¥–Ω–µ–π** —Å –º–æ–º–µ–Ω—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è. –ü–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞ –Ω—É–∂–Ω–æ –≤–æ–π—Ç–∏ –∑–∞–Ω–æ–≤–æ.

## –ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è:

1. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:**
   ```json
   POST /api/v1/users/register
   {
     "phone_or_email": "user@example.com",
     "password": "password123",
     "full_name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤"
   }
   ```

2. **–í—Ö–æ–¥ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞:**
   ```json
   POST /api/v1/users/login
   {
     "phone_or_email": "user@example.com",
     "password": "password123"
   }
   ```
   ‚Üí –ü–æ–ª—É—á–∞–µ—Ç–µ `access_token`

3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞:**
   ```json
   GET /api/v1/users/me
   Headers: Authorization: Bearer –≤–∞—à_—Ç–æ–∫–µ–Ω
   ```
   ‚Üí –ü–æ–ª—É—á–∞–µ—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

4. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –≤ –∫–æ—Ä–∑–∏–Ω—É:**
   ```json
   POST /api/v1/cart/items
   Headers: Authorization: Bearer –≤–∞—à_—Ç–æ–∫–µ–Ω
   Body: {
     "product_id": 1,
     "quantity": 2
   }
   ```

## –ë–µ–∑ —Ç–æ–∫–µ–Ω–∞:

–ï—Å–ª–∏ –≤—ã –ø–æ–ø—ã—Ç–∞–µ—Ç–µ—Å—å –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –∑–∞—â–∏—â–µ–Ω–Ω–æ–º—É endpoint –±–µ–∑ —Ç–æ–∫–µ–Ω–∞ –∏–ª–∏ —Å –Ω–µ–≤–µ—Ä–Ω—ã–º —Ç–æ–∫–µ–Ω–æ–º, –ø–æ–ª—É—á–∏—Ç–µ –æ—à–∏–±–∫—É:
```json
{
  "detail": "–¢—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è"
}
```
–°—Ç–∞—Ç—É—Å –∫–æ–¥: `401 Unauthorized`

